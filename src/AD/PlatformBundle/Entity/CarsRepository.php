<?php

namespace AD\PlatformBundle\Entity;

/**
 * CarsRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class CarsRepository extends \Doctrine\ORM\EntityRepository
{
    public function findByMotCle($motcle)
    {
        $qb = $this->createQueryBuilder('c');
        
        $qb
            ->where($qb->expr()->like('c.name', ':motcle'))
            ->orWhere($qb->expr()->like('c.model',':motcle'))
            ->andWhere('c.report = 0')
            ->setParameter('motcle', "%".$motcle."%")
            ;
        //Utilisation du querybuilder. Utilisation de la fonction expr() pour les 'where" un peu plus compliquÃ© comme ici le like.
        return $qb
                ->getQuery()
                ->getResult()
                ;
    }
    
    public function findByReport()
    {
        $qb = $this->createQueryBuilder('c');
        
        $qb     
                ->select('c')
                ->where('c.report = 1')
                ;
        return $qb
                ->getQuery()
                ->getResult()
                ;
    }
    
}
